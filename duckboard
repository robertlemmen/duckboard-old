#!/usr/bin/env perl6

use v6; 

use lib $*PROGRAM.dirname.IO.child("lib").path;

use Duckboard::Logging;
use Duckboard::Server;
use Duckboard::Store;

my $log = Duckboard::Logging.new('main');

sub MAIN(Int :$port = 6001, Str :$store-dir = 'store') {

    $log.info("Setting up duckboard");

    my $srv = Duckboard::Server.new($port);
    my $store = Duckboard::Store.new($store-dir);

    $log.info("Application init complete, starting");

    $srv.start;
}

